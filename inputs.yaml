# GeoGov Dynamic Input Configuration
# This file defines regulations to research and features to test for compliance analysis

# Regulations to research and index into the knowledge base
regulations:
  - name: "EU Digital Services Act"
    jurisdiction: "EU"
    topics: ["recommender_systems", "content_moderation", "risk_assessment"]
    priority: "high"
    
  - name: "California SB976"  
    jurisdiction: "California"
    topics: ["minors_protection", "social_media", "targeted_advertising"]
    priority: "high"
    
  - name: "COPPA"
    jurisdiction: "United States"
    topics: ["children_privacy", "data_collection", "parental_consent"]
    priority: "high"
    
  - name: "GDPR"
    jurisdiction: "EU"
    topics: ["data_privacy", "user_consent", "data_portability"]
    priority: "medium"
    
  - name: "Florida Online Protection for Minors"
    jurisdiction: "Florida"
    topics: ["minors_protection", "age_verification", "social_media"]
    priority: "medium"
    
  - name: "Utah Social Media Regulation Act"
    jurisdiction: "Utah"
    topics: ["social_media", "minors_protection", "parental_controls"]
    priority: "medium"
    
  - name: "New York SHIELD Act"
    jurisdiction: "New York"
    topics: ["data_security", "breach_notification", "privacy"]
    priority: "low"
    
  - name: "California CCPA"
    jurisdiction: "California"
    topics: ["consumer_privacy", "data_rights", "opt_out"]
    priority: "medium"

# Test feature artifacts for compliance analysis
test_features:
  - feature_id: "F-2381"
    title: "Personalized Home Feed v3"
    description: "Reranks videos using watch history and user preferences. EU rollout planned for Q2 2024."
    docs: 
      - "https://internal/prd/personalized-feed-v3"
      - "https://internal/trd/recommendation-engine"
    code_hints:
      - "uses ageGate() for minor detection"
      - "if region in ['EU','EEA']: apply_dsa_compliance()"
      - "personalization_engine.rank_content(user_profile)"
    tags: ["recommender", "personalization", "minors_possible", "geo_eu"]
    expected_compliance: true
    expected_regulations: ["EU-DSA"]
    
  - feature_id: "F-3847"
    title: "Targeted Ad System"
    description: "Behavioral advertising targeting system with demographic profiling capabilities"
    docs:
      - "https://internal/ads/targeting-system"
    code_hints:
      - "if user.age < 18: disable_behavioral_targeting()"
      - "collect_behavioral_data(user_id, browsing_history)"
      - "if jurisdiction == 'CA': apply_ccpa_restrictions()"
    tags: ["advertising", "targeting", "behavioral_data", "minors"]
    expected_compliance: true
    expected_regulations: ["CA-SB976", "COPPA", "CCPA"]
    
  - feature_id: "F-1923"  
    title: "Content Moderation Appeals"
    description: "System allowing users to appeal content takedown decisions"
    docs:
      - "https://internal/moderation/appeals-flow"
    code_hints:
      - "appeal_window = 30_days if region == 'EU' else 14_days"
      - "provide_explanation_for_decision()"
      - "human_review_required = True"
    tags: ["moderation", "appeals", "transparency", "geo_eu"]
    expected_compliance: true
    expected_regulations: ["EU-DSA"]
    
  - feature_id: "F-5621"
    title: "Social Media Night Mode"
    description: "Restricts notifications and certain features during nighttime hours for minor users"
    docs:
      - "https://internal/features/night-mode"
    code_hints:
      - "if user.age < 18 and time.between(10pm, 6am): enable_restrictions()"
      - "disable_addictive_features(infinite_scroll=False, push_notifications=False)"
    tags: ["minors_protection", "time_restrictions", "wellbeing"]
    expected_compliance: true
    expected_regulations: ["CA-SB976", "FL-OPM"]
    
  - feature_id: "F-7733"
    title: "Data Export Tool"
    description: "Allows users to download their personal data in structured format"
    docs:
      - "https://internal/privacy/data-export"
    code_hints:
      - "export_user_data(format='json', include_metadata=True)"
      - "if gdpr_applicable(): include_processing_history()"
    tags: ["data_portability", "privacy_rights", "user_control"]
    expected_compliance: true
    expected_regulations: ["GDPR"]
    
  - feature_id: "F-9999"
    title: "Regional Content Geofencing"
    description: "Geographic content restrictions for business licensing reasons, not legal compliance"
    docs:
      - "https://internal/geo/content-restrictions"
    code_hints:
      - "if user.country == 'US': show_us_content_only()"
      - "# Business decision - not legal requirement"
    tags: ["geofencing", "business_logic", "content_filtering"]
    expected_compliance: false
    expected_regulations: []

# Analysis configuration
analysis_config:
  # RAG retrieval settings
  rag_topk: 8
  
  # Signal extraction patterns (can extend the built-in patterns)
  additional_patterns:
    ai_systems: "artificial intelligence|machine learning|AI system|algorithmic"
    age_verification: "age verification|age check|verify age|date of birth"
    consent_management: "consent|opt-in|opt-out|permission|authorize"
    
  # Rules engine settings
  rules_file: "rules.yaml"
  
  # Output settings
  export_csv: true
  generate_evidence_zip: true
  
# Scraping configuration  
scraping_config:
  # Which APIs to use for regulation research
  use_perplexity: true
  use_exa: true
  
  # API limits and settings
  max_sources_per_regulation: 15
  max_content_length: 10000
  
  # Priority jurisdictions (research these first)
  priority_jurisdictions: ["EU", "California", "United States"]
  
  # Topics to focus research on
  focus_topics:
    - "recommender_systems"
    - "minors_protection" 
    - "content_moderation"
    - "data_privacy"
    - "targeted_advertising"